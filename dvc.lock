schema: '2.0'
stages:
  data_split:
    cmd: python stages/data_split.py --config=params.yaml
    deps:
    - path: data/Churn_Modelling.csv
      md5: 73fba4fd85b6dbaf95c9d5e3836d3926
      size: 684860
    - path: stages/data_split.py
      hash: md5
      md5: b5a7d6d800c6bc797668716638960f91
      size: 1677
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          data_dir: data
          data_fname: Churn_Modelling.csv
          cat_cols:
          - Geography
          num_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 42
          model_dir: model/
        data_split:
          test_size: 0.25
    outs:
    - path: data/X_test.pkl
      hash: md5
      md5: cdcfdded7b0aba25b54243bdc9daf92f
      size: 185987
    - path: data/X_train.pkl
      hash: md5
      md5: 84991cc650d4f320bad44f1242ee6373
      size: 556006
    - path: data/y_test.pkl
      hash: md5
      md5: 20b868ac8a1bc2bb34e898c6791d9e4e
      size: 60586
    - path: data/y_train.pkl
      hash: md5
      md5: 6282068b0007b7b663f55beb12225b19
      size: 180595
  train:
    cmd: python stages/train.py --config=params.yaml
    deps:
    - path: data/X_train.pkl
      hash: md5
      md5: 84991cc650d4f320bad44f1242ee6373
      size: 556006
    - path: data/y_train.pkl
      hash: md5
      md5: 6282068b0007b7b663f55beb12225b19
      size: 180595
    - path: stages/train.py
      hash: md5
      md5: f658d920d66eca59dba62030b71e7256
      size: 2484
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          data_dir: data
          data_fname: Churn_Modelling.csv
          cat_cols:
          - Geography
          num_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 42
          model_dir: model/
        train:
          model_type: randomforest
          params:
            n_estimators: 150
            max_depth: 20
    outs:
    - path: model//clf-model
      hash: md5
      md5: 2f406b2d423b3f07df6bba86e37c1f7e
      size: 23251655
    - path: model//clf-model.mlem
      hash: md5
      md5: 3959d9327ab6616dccaa88ab2c27d485
      size: 1973
  eval:
    cmd: python stages/eval.py --config=params.yaml
    deps:
    - path: data/X_test.pkl
      md5: fcd1b7e28f320159a0eed658ee56ba97
      size: 186030
    - path: data/y_test.pkl
      md5: 7743d704b8b97cc303ceef12b9be6832
      size: 60613
    - path: model//clf-model
      md5: c8a06d11eee4053037d215f4fe6b7ae5
      size: 20931746
    - path: model//clf-model.mlem
      md5: c93486baeb8ab115c8116cc733bc5bbe
      size: 1708
    - path: stages/eval.py
      md5: 0f8bd41fc66ef9117d6e3451a3ed3631
      size: 2700
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          data_dir: data
          data_fname: Churn_Modelling.csv
          cat_cols:
          - Geography
          num_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 42
          model_dir: model/
        data_split:
          test_size: 0.25
        train:
          model_type: randomforest
          params:
            n_estimators: 150
            max_depth: 20
    outs:
    - path: eval_plots/cm.png
      md5: e56a750802e2954202029054d2f625bd
      size: 10413
    - path: eval_plots/plots/sklearn/roc.json
      md5: f09252db150e39ed71ea13ab914362cf
      size: 86311
    - path: feat_imp.csv
      md5: 0877a48b2e2935cb7f596d30137a4e2c
      size: 299
    - path: metrics.json
      md5: 36658c4136489292fd5e086f04a2f1cb
      size: 67
    - path: models/perm_imp.joblib
      md5: 64ec49282ee1bea38d577c92914b03be
      size: 20930427
